{{/*
  Fieldset Components

  A collection of form field layout components for consistent form structure.
  These components use data-slot attributes for styling relationships.

  Components:
    - fieldset: Groups related form fields
    - legend: Title for a fieldset
    - field-group: Container for multiple fields with consistent spacing
    - field: Individual form field wrapper (label + control + description/error)
    - label: Form field label
    - field-description: Help text for a field
    - field-error: Error message for a field

  Usage:
    {{template "fieldset-start" dict "legend" "Contact Information"}}
      {{template "field-group-start"}}
        {{template "field-start"}}
          {{template "label" dict "for" "email" "text" "Email"}}
          {{template "input" dict "name" "email" "type" "email" "placeholder" "you@example.com"}}
          {{template "field-description" dict "text" "We'll never share your email."}}
        {{template "field-end"}}
      {{template "field-group-end"}}
    {{template "fieldset-end"}}
*/}}

{{/*
  Fieldset - Groups related form fields

  Params:
    legend   - Optional legend text
    disabled - Boolean, disables all fields in the fieldset
    class    - Additional CSS classes

  Usage:
    {{template "fieldset-start" dict "legend" "Personal Information"}}
      ... fields ...
    {{template "fieldset-end"}}
*/}}
{{define "fieldset-start"}}
<fieldset class="*:data-[slot=text]:mt-1 [&>*+[data-slot=control]]:mt-6 {{.class}}" {{if .disabled}}disabled{{end}}>
  {{if .legend}}
  <legend data-slot="legend" class="text-base/6 font-semibold text-[var(--color-text)] sm:text-sm/6">
    {{.legend}}
  </legend>
  {{end}}
{{end}}

{{define "fieldset-end"}}
</fieldset>
{{end}}

{{/*
  Legend - Title for a fieldset (standalone version)

  Params:
    text  - Legend text (required)
    class - Additional CSS classes
*/}}
{{define "legend"}}
<legend data-slot="legend" class="text-base/6 font-semibold text-[var(--color-text)] sm:text-sm/6 {{.class}}">
  {{.text}}
</legend>
{{end}}

{{/*
  FieldGroup - Container for multiple fields

  Provides consistent vertical spacing between fields (space-y-8).

  Usage:
    {{template "field-group-start"}}
      {{template "field-start"}}...{{template "field-end"}}
      {{template "field-start"}}...{{template "field-end"}}
    {{template "field-group-end"}}
*/}}
{{define "field-group-start"}}
<div data-slot="control" class="space-y-8 {{.class}}">
{{end}}

{{define "field-group-end"}}
</div>
{{end}}

{{/*
  Field - Individual form field wrapper

  Automatically handles spacing between label, control, description, and error.
  Uses CSS selectors on data-slot attributes for spacing.

  Params:
    class - Additional CSS classes

  Usage:
    {{template "field-start"}}
      {{template "label" dict "for" "name" "text" "Full Name"}}
      {{template "input" dict "name" "name" "id" "name"}}
    {{template "field-end"}}
*/}}
{{define "field-start"}}
<div class="[&>[data-slot=label]+[data-slot=control]]:mt-3 [&>[data-slot=label]+[data-slot=description]]:mt-1 [&>[data-slot=description]+[data-slot=control]]:mt-3 [&>[data-slot=control]+[data-slot=description]]:mt-3 [&>[data-slot=control]+[data-slot=error]]:mt-3 *:data-[slot=label]:font-medium {{.class}}">
{{end}}

{{define "field-end"}}
</div>
{{end}}

{{/*
  Label - Form field label

  Params:
    text     - Label text (required)
    for      - ID of the associated form control
    required - Boolean, shows required indicator
    class    - Additional CSS classes

  Usage:
    {{template "label" dict "text" "Email Address" "for" "email" "required" true}}
*/}}
{{define "label"}}
<label data-slot="label"
       {{if .for}}for="{{.for}}"{{end}}
       class="text-base/6 text-[var(--color-text)] select-none sm:text-sm/6 {{.class}}">
  {{.text}}{{if .required}}<span class="text-[var(--color-danger)] ml-1">*</span>{{end}}
</label>
{{end}}

{{/*
  Description - Help text for a form field

  Params:
    text  - Description text (required)
    class - Additional CSS classes

  Usage:
    {{template "field-description" dict "text" "Enter your full legal name as it appears on your ID."}}
*/}}
{{define "field-description"}}
<p data-slot="description" class="text-base/6 text-[var(--color-text-secondary)] sm:text-sm/6 {{.class}}">
  {{.text}}
</p>
{{end}}

{{/*
  ErrorMessage - Error message for a form field

  Params:
    text  - Error message text (required)
    class - Additional CSS classes
    id    - Optional ID for aria-describedby linking

  Usage:
    {{template "field-error" dict "text" "Please enter a valid email address."}}
*/}}
{{define "field-error"}}
<p data-slot="error"
   {{if .id}}id="{{.id}}"{{end}}
   role="alert"
   class="text-base/6 text-[var(--color-danger)] sm:text-sm/6 {{.class}}">
  {{.text}}
</p>
{{end}}

{{/*
  Inline Field - Horizontal layout for checkbox/radio with label

  Params:
    class - Additional CSS classes

  Usage:
    {{template "inline-field-start"}}
      {{template "checkbox" dict "name" "terms" "id" "terms"}}
      {{template "label" dict "for" "terms" "text" "I agree to the terms"}}
    {{template "inline-field-end"}}
*/}}
{{define "inline-field-start"}}
<div class="flex items-center gap-x-3 {{.class}}">
{{end}}

{{define "inline-field-end"}}
</div>
{{end}}
