{{/*
  Input Component

  Styled text input with support for various types and states.

  Params:
    name        - Input name attribute (required)
    type        - Input type: text (default), email, password, number, tel, url, search, date, datetime-local, time, month, week
    id          - Input ID (defaults to name if not provided)
    value       - Input value
    placeholder - Placeholder text
    required    - Boolean, marks field as required
    disabled    - Boolean, disables the input
    readonly    - Boolean, makes input read-only
    invalid     - Boolean, shows invalid state (red border)
    autofocus   - Boolean, focuses input on page load
    autocomplete- Autocomplete attribute value
    min         - Minimum value (for number/date types)
    max         - Maximum value (for number/date types)
    step        - Step value (for number types)
    minlength   - Minimum length
    maxlength   - Maximum length
    pattern     - Validation pattern
    class       - Additional CSS classes for the wrapper
    inputClass  - Additional CSS classes for the input element
    ariaDescribedby - ID of element describing this input (for errors)

    htmx attributes:
    hxGet, hxPost, hxTrigger, hxTarget, hxSwap, hxValidate

  Usage:
    {{template "input" dict "name" "email" "type" "email" "placeholder" "you@example.com"}}
    {{template "input" dict "name" "password" "type" "password" "required" true}}
    {{template "input" dict "name" "amount" "type" "number" "min" "0" "step" "0.01"}}
*/}}

{{define "input"}}
{{- $id := or .id .name -}}
{{- $type := or .type "text" -}}
{{- $invalid := or .invalid false -}}
{{- $disabled := or .disabled false -}}

<span data-slot="control"
      class="relative block w-full before:absolute before:inset-px before:rounded-[calc(var(--radius-lg)-1px)] before:bg-white before:shadow-sm after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:ring-transparent after:ring-inset focus-within:after:ring-2 focus-within:after:ring-[var(--color-primary)] {{if $disabled}}opacity-50 before:bg-[var(--color-zinc-950-5)] before:shadow-none{{end}} {{.class}}">
  <input type="{{$type}}"
         name="{{.name}}"
         id="{{$id}}"
         {{if .value}}value="{{.value}}"{{end}}
         {{if .placeholder}}placeholder="{{.placeholder}}"{{end}}
         {{if .required}}required{{end}}
         {{if $disabled}}disabled{{end}}
         {{if .readonly}}readonly{{end}}
         {{if .autofocus}}autofocus{{end}}
         {{if .autocomplete}}autocomplete="{{.autocomplete}}"{{end}}
         {{if .min}}min="{{.min}}"{{end}}
         {{if .max}}max="{{.max}}"{{end}}
         {{if .step}}step="{{.step}}"{{end}}
         {{if .minlength}}minlength="{{.minlength}}"{{end}}
         {{if .maxlength}}maxlength="{{.maxlength}}"{{end}}
         {{if .pattern}}pattern="{{.pattern}}"{{end}}
         {{if .ariaDescribedby}}aria-describedby="{{.ariaDescribedby}}"{{end}}
         {{if $invalid}}aria-invalid="true"{{end}}
         {{if .hxGet}}hx-get="{{.hxGet}}"{{end}}
         {{if .hxPost}}hx-post="{{.hxPost}}"{{end}}
         {{if .hxTrigger}}hx-trigger="{{.hxTrigger}}"{{end}}
         {{if .hxTarget}}hx-target="{{.hxTarget}}"{{end}}
         {{if .hxSwap}}hx-swap="{{.hxSwap}}"{{end}}
         {{if .hxValidate}}hx-validate="{{.hxValidate}}"{{end}}
         class="relative block w-full appearance-none rounded-lg px-3.5 py-2.5 sm:px-3 sm:py-1.5 text-base/6 text-[var(--color-text)] placeholder:text-[var(--color-text-tertiary)] sm:text-sm/6 border bg-transparent focus:outline-none {{if $invalid}}border-[var(--color-danger)] hover:border-[var(--color-danger)]{{else}}border-[var(--color-border)] hover:border-[var(--color-border-hover)]{{end}} {{if $disabled}}border-[var(--color-border-strong)] cursor-not-allowed{{end}} {{.inputClass}}">
</span>
{{end}}

{{/*
  InputGroup - Input with leading/trailing icons

  Wraps an input with optional leading and trailing icons.

  Params:
    class - Additional CSS classes

  Usage:
    {{template "input-group-start"}}
      {{template "icon" dict "name" "envelope" "class" "text-[var(--color-text-tertiary)]"}}
      {{template "input" dict "name" "email" "type" "email" "placeholder" "you@example.com"}}
    {{template "input-group-end"}}

    {{template "input-group-start"}}
      {{template "icon" dict "name" "magnifying-glass" "class" "text-[var(--color-text-tertiary)]"}}
      {{template "input" dict "name" "search" "type" "search" "placeholder" "Search..."}}
      {{template "icon" dict "name" "x-mark" "class" "text-[var(--color-text-tertiary)] cursor-pointer"}}
    {{template "input-group-end"}}
*/}}
{{define "input-group-start"}}
<span data-slot="control"
      class="relative isolate block has-[[data-slot=icon]:first-child]:[&_input]:pl-10 has-[[data-slot=icon]:last-child]:[&_input]:pr-10 sm:has-[[data-slot=icon]:first-child]:[&_input]:pl-8 sm:has-[[data-slot=icon]:last-child]:[&_input]:pr-8 *:data-[slot=icon]:pointer-events-none *:data-[slot=icon]:absolute *:data-[slot=icon]:top-3 *:data-[slot=icon]:z-10 *:data-[slot=icon]:size-5 sm:*:data-[slot=icon]:top-2.5 sm:*:data-[slot=icon]:size-4 [&>[data-slot=icon]:first-child]:left-3 sm:[&>[data-slot=icon]:first-child]:left-2.5 [&>[data-slot=icon]:last-child]:right-3 sm:[&>[data-slot=icon]:last-child]:right-2.5 *:data-[slot=icon]:text-[var(--color-text-tertiary)] {{.class}}">
{{end}}

{{define "input-group-end"}}
</span>
{{end}}

{{/*
  Simple Input - Minimal input without wrapper styling

  For cases where you need just the input element without the control wrapper.
  Use the full "input" template for most cases.

  Params:
    Same as input, but renders without the outer span wrapper
*/}}
{{define "input-bare"}}
{{- $id := or .id .name -}}
{{- $type := or .type "text" -}}
{{- $invalid := or .invalid false -}}
{{- $disabled := or .disabled false -}}

<input type="{{$type}}"
       name="{{.name}}"
       id="{{$id}}"
       {{if .value}}value="{{.value}}"{{end}}
       {{if .placeholder}}placeholder="{{.placeholder}}"{{end}}
       {{if .required}}required{{end}}
       {{if $disabled}}disabled{{end}}
       {{if .readonly}}readonly{{end}}
       {{if .autofocus}}autofocus{{end}}
       {{if .autocomplete}}autocomplete="{{.autocomplete}}"{{end}}
       {{if .min}}min="{{.min}}"{{end}}
       {{if .max}}max="{{.max}}"{{end}}
       {{if .step}}step="{{.step}}"{{end}}
       {{if .minlength}}minlength="{{.minlength}}"{{end}}
       {{if .maxlength}}maxlength="{{.maxlength}}"{{end}}
       {{if .pattern}}pattern="{{.pattern}}"{{end}}
       {{if .ariaDescribedby}}aria-describedby="{{.ariaDescribedby}}"{{end}}
       {{if $invalid}}aria-invalid="true"{{end}}
       class="block w-full appearance-none rounded-lg px-3.5 py-2.5 sm:px-3 sm:py-1.5 text-base/6 text-[var(--color-text)] placeholder:text-[var(--color-text-tertiary)] sm:text-sm/6 border bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] {{if $invalid}}border-[var(--color-danger)]{{else}}border-[var(--color-border)] hover:border-[var(--color-border-hover)]{{end}} {{if $disabled}}opacity-50 cursor-not-allowed{{end}} {{.class}}">
{{end}}
