{{/*
  Alert Dialog Component

  Centered confirmation/alert dialog using Alpine.js.
  Simpler than Dialog, designed for quick confirmations.

  Components:
    - alert: Full alert dialog
    - alert-title: Alert heading (centered on mobile)
    - alert-description: Alert description text
    - alert-body: Additional content area
    - alert-actions: Footer with action buttons

  Params for alert:
    id    - Alert ID for external triggering (required)
    size  - Panel width: xs, sm, md (default), lg, xl
    class - Additional CSS classes

  Usage:
    {{template "alert-start" dict "id" "confirm-delete" "size" "sm"}}
      {{template "alert-title" dict "text" "Delete Item?"}}
      {{template "alert-description" dict "text" "This action cannot be undone. The item will be permanently removed."}}
      {{template "alert-actions-start"}}
        {{template "button" dict "text" "Cancel" "variant" "plain" "onclick" "$dispatch('close-alert')"}}
        {{template "button" dict "text" "Delete" "color" "danger"}}
      {{template "alert-actions-end"}}
    {{template "alert-end"}}

    <button @click="$dispatch('open-alert', 'confirm-delete')">Delete Item</button>

  With form (htmx):
    {{template "alert-start" dict "id" "confirm-action"}}
      {{template "alert-title" dict "text" "Confirm Submission"}}
      {{template "alert-description" dict "text" "Are you ready to submit your inspection report?"}}
      {{template "alert-actions-start"}}
        {{template "button" dict "text" "Cancel" "variant" "plain" "onclick" "$dispatch('close-alert')"}}
        {{template "button" dict "text" "Submit Report" "color" "primary" "hxPost" "/api/submit" "hxTarget" "#result"}}
      {{template "alert-actions-end"}}
    {{template "alert-end"}}
*/}}

{{define "alert-start"}}
{{- $size := or .size "md" -}}
<div x-data="{ open: false }"
     x-show="open"
     x-cloak
     @open-alert.window="if ($event.detail === '{{.id}}') open = true"
     @close-alert.window="open = false"
     @keydown.escape.window="open = false"
     class="relative z-50 {{.class}}"
     role="alertdialog"
     aria-modal="true"
     id="{{.id}}">

  {{/* Backdrop - slightly lighter than dialog */}}
  <div x-show="open"
       x-transition:enter="transition ease-out duration-100"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-100"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       class="fixed inset-0 bg-[var(--color-zinc-950)]/15 backdrop-blur-sm"
       @click="open = false">
  </div>

  {{/* Centered panel container */}}
  <div class="fixed inset-0 w-screen overflow-y-auto p-8 sm:p-4">
    <div class="grid min-h-full grid-rows-[1fr_auto_1fr] justify-items-center sm:grid-rows-[1fr_auto_3fr]">
      <div x-show="open"
           x-transition:enter="transition ease-out duration-100"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-100"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95"
           class="row-start-2 w-full rounded-2xl bg-white p-8 sm:p-6 shadow-lg ring-1 ring-[var(--color-zinc-950)]/10
                  {{if eq $size "xs"}}sm:max-w-xs{{end}}
                  {{if eq $size "sm"}}sm:max-w-sm{{end}}
                  {{if eq $size "md"}}sm:max-w-md{{end}}
                  {{if eq $size "lg"}}sm:max-w-lg{{end}}
                  {{if eq $size "xl"}}sm:max-w-xl{{end}}">
{{end}}

{{define "alert-end"}}
      </div>
    </div>
  </div>
</div>
{{end}}

{{/*
  Alert with Inline State

  For use when parent component controls the open state.
  Parent must have: x-data="{ alertOpen: false }"
*/}}
{{define "alert-inline-start"}}
{{- $size := or .size "md" -}}
<div x-show="alertOpen"
     x-cloak
     @keydown.escape.window="alertOpen = false"
     class="relative z-50 {{.class}}"
     role="alertdialog"
     aria-modal="true">

  {{/* Backdrop */}}
  <div x-show="alertOpen"
       x-transition:enter="transition ease-out duration-100"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-100"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       class="fixed inset-0 bg-[var(--color-zinc-950)]/15 backdrop-blur-sm"
       @click="alertOpen = false">
  </div>

  {{/* Centered panel container */}}
  <div class="fixed inset-0 w-screen overflow-y-auto p-8 sm:p-4">
    <div class="grid min-h-full grid-rows-[1fr_auto_1fr] justify-items-center sm:grid-rows-[1fr_auto_3fr]">
      <div x-show="alertOpen"
           x-transition:enter="transition ease-out duration-100"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-100"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95"
           @close-alert.window="alertOpen = false"
           class="row-start-2 w-full rounded-2xl bg-white p-8 sm:p-6 shadow-lg ring-1 ring-[var(--color-zinc-950)]/10
                  {{if eq $size "xs"}}sm:max-w-xs{{end}}
                  {{if eq $size "sm"}}sm:max-w-sm{{end}}
                  {{if eq $size "md"}}sm:max-w-md{{end}}
                  {{if eq $size "lg"}}sm:max-w-lg{{end}}
                  {{if eq $size "xl"}}sm:max-w-xl{{end}}">
{{end}}

{{/*
  Alert Title

  Main heading - centered on mobile, left-aligned on desktop.

  Params:
    text  - Title text
    class - Additional CSS classes
*/}}
{{define "alert-title"}}
<h2 class="text-center text-base/6 font-semibold text-balance text-[var(--color-text)] sm:text-left sm:text-sm/6 {{.class}}">
  {{.text}}
</h2>
{{end}}

{{/*
  Alert Description

  Descriptive text - centered on mobile, left-aligned on desktop.

  Params:
    text  - Description text
    class - Additional CSS classes
*/}}
{{define "alert-description"}}
<p class="mt-2 text-center text-base/6 text-[var(--color-text-secondary)] text-pretty sm:text-left sm:text-sm/6 {{.class}}">
  {{.text}}
</p>
{{end}}

{{/*
  Alert Body

  Additional content area (forms, lists, etc.)

  Usage:
    {{template "alert-body-start"}}
      <ul class="mt-2 list-disc pl-5">
        <li>Item will be deleted</li>
        <li>All related data removed</li>
      </ul>
    {{template "alert-body-end"}}
*/}}
{{define "alert-body-start"}}
<div class="mt-4 {{.class}}">
{{end}}

{{define "alert-body-end"}}
</div>
{{end}}

{{/*
  Alert Actions

  Footer area for buttons.
  Stack vertically on mobile, horizontal on desktop.

  Usage:
    {{template "alert-actions-start"}}
      {{template "button" dict "text" "Cancel" "variant" "plain" "onclick" "$dispatch('close-alert')"}}
      {{template "button" dict "text" "Confirm" "color" "primary"}}
    {{template "alert-actions-end"}}
*/}}
{{define "alert-actions-start"}}
<div class="mt-6 sm:mt-4 flex flex-col-reverse items-center justify-end gap-3 *:w-full sm:flex-row sm:*:w-auto {{.class}}">
{{end}}

{{define "alert-actions-end"}}
</div>
{{end}}

{{/*
  Alert with Icon

  Variant with a prominent icon (warning, danger, success, info).

  Params:
    id    - Alert ID (required)
    size  - Panel width (default: sm)
    icon  - Icon type: warning, danger, success, info
    class - Additional CSS classes

  Usage:
    {{template "alert-icon-start" dict "id" "warning-alert" "icon" "warning"}}
      {{template "alert-title" dict "text" "Warning"}}
      {{template "alert-description" dict "text" "This action may have consequences."}}
      {{template "alert-actions-start"}}
        {{template "button" dict "text" "Cancel" "variant" "plain" "onclick" "$dispatch('close-alert')"}}
        {{template "button" dict "text" "Continue" "color" "accent"}}
      {{template "alert-actions-end"}}
    {{template "alert-end"}}
*/}}
{{define "alert-icon-start"}}
{{- $size := or .size "sm" -}}
{{- $icon := or .icon "warning" -}}
<div x-data="{ open: false }"
     x-show="open"
     x-cloak
     @open-alert.window="if ($event.detail === '{{.id}}') open = true"
     @close-alert.window="open = false"
     @keydown.escape.window="open = false"
     class="relative z-50 {{.class}}"
     role="alertdialog"
     aria-modal="true"
     id="{{.id}}">

  {{/* Backdrop */}}
  <div x-show="open"
       x-transition:enter="transition ease-out duration-100"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-100"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       class="fixed inset-0 bg-[var(--color-zinc-950)]/15 backdrop-blur-sm"
       @click="open = false">
  </div>

  {{/* Centered panel */}}
  <div class="fixed inset-0 w-screen overflow-y-auto p-8 sm:p-4">
    <div class="grid min-h-full grid-rows-[1fr_auto_1fr] justify-items-center sm:grid-rows-[1fr_auto_3fr]">
      <div x-show="open"
           x-transition:enter="transition ease-out duration-100"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-100"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95"
           class="row-start-2 w-full rounded-2xl bg-white p-8 sm:p-6 shadow-lg ring-1 ring-[var(--color-zinc-950)]/10
                  {{if eq $size "xs"}}sm:max-w-xs{{end}}
                  {{if eq $size "sm"}}sm:max-w-sm{{end}}
                  {{if eq $size "md"}}sm:max-w-md{{end}}
                  {{if eq $size "lg"}}sm:max-w-lg{{end}}
                  {{if eq $size "xl"}}sm:max-w-xl{{end}}">
        {{/* Icon */}}
        <div class="mx-auto mb-4 flex size-12 items-center justify-center rounded-full
                    {{if eq $icon "warning"}}bg-[var(--color-amber-100)] text-[var(--color-amber-600)]{{end}}
                    {{if eq $icon "danger"}}bg-[var(--color-red-100)] text-[var(--color-danger)]{{end}}
                    {{if eq $icon "success"}}bg-[var(--color-green-100)] text-[var(--color-success)]{{end}}
                    {{if eq $icon "info"}}bg-[var(--color-blue-100)] text-[var(--color-blue-600)]{{end}}
                    sm:mx-0">
          {{if eq $icon "warning"}}
          <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/>
          </svg>
          {{end}}
          {{if eq $icon "danger"}}
          <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"/>
          </svg>
          {{end}}
          {{if eq $icon "success"}}
          <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          {{end}}
          {{if eq $icon "info"}}
          <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"/>
          </svg>
          {{end}}
        </div>
{{end}}
