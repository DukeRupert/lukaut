{{/*
  Table Component

  Responsive data table with consistent styling.

  Components:
    - table-start/end: Table wrapper with scroll container
    - table-head-start/end: Table header section
    - table-body-start/end: Table body section
    - table-row-start/end: Table row (supports clickable rows)
    - table-header: Header cell (th)
    - table-cell: Data cell (td)

  Params for table-start:
    bleed   - Boolean, extends table to container edges
    dense   - Boolean, reduces cell padding
    grid    - Boolean, adds vertical grid lines
    striped - Boolean, alternates row backgrounds
    class   - Additional CSS classes

  Usage:
    {{template "table-start" dict "striped" true}}
      {{template "table-head-start"}}
        {{template "table-row-start"}}
          {{template "table-header" dict "text" "Name"}}
          {{template "table-header" dict "text" "Email"}}
          {{template "table-header" dict "text" "Role"}}
        {{template "table-row-end"}}
      {{template "table-head-end"}}
      {{template "table-body-start"}}
        {{range .Users}}
        {{template "table-row-start"}}
          {{template "table-cell" dict "text" .Name}}
          {{template "table-cell" dict "text" .Email}}
          {{template "table-cell" dict "text" .Role}}
        {{template "table-row-end"}}
        {{end}}
      {{template "table-body-end"}}
    {{template "table-end"}}

  Clickable rows:
    {{template "table-row-start" dict "href" "/users/123"}}
      ...
    {{template "table-row-end"}}
*/}}

{{define "table-start"}}
{{- $bleed := or .bleed false -}}
{{- $dense := or .dense false -}}
{{- $grid := or .grid false -}}
{{- $striped := or .striped false -}}
<div class="flow-root {{.class}}"
     data-table-bleed="{{$bleed}}"
     data-table-dense="{{$dense}}"
     data-table-grid="{{$grid}}"
     data-table-striped="{{$striped}}">
  <div class="-mx-[var(--gutter,1rem)] overflow-x-auto whitespace-nowrap">
    <div class="inline-block min-w-full align-middle {{if not $bleed}}sm:px-[var(--gutter,1rem)]{{end}}">
      <table class="min-w-full text-left text-sm/6 text-[var(--color-text)]">
{{end}}

{{define "table-end"}}
      </table>
    </div>
  </div>
</div>
{{end}}

{{/*
  Table Head

  Container for header rows.
*/}}
{{define "table-head-start"}}
<thead class="text-[var(--color-text-secondary)]">
{{end}}

{{define "table-head-end"}}
</thead>
{{end}}

{{/*
  Table Body

  Container for data rows.
*/}}
{{define "table-body-start"}}
<tbody>
{{end}}

{{define "table-body-end"}}
</tbody>
{{end}}

{{/*
  Table Row

  Individual table row. Can be clickable with href parameter.

  Params:
    href   - URL to navigate to when row is clicked
    target - Link target (_blank, etc.)
    class  - Additional CSS classes
*/}}
{{define "table-row-start"}}
{{- $href := .href -}}
{{- $striped := false -}}{{/* Will be styled via parent data attribute */}}
<tr class="{{if $href}}cursor-pointer hover:bg-[var(--color-zinc-950)]/[0.025]{{end}} {{.class}}"
    {{if $href}}onclick="window.location='{{$href}}'"{{end}}>
{{end}}

{{define "table-row-end"}}
</tr>
{{end}}

{{/*
  Table Header Cell

  Header cell (th) with proper styling.

  Params:
    text   - Header text
    align  - Text alignment: left (default), center, right
    width  - Optional width class (e.g., "w-1/4", "w-40")
    class  - Additional CSS classes
*/}}
{{define "table-header"}}
{{- $align := or .align "left" -}}
<th class="border-b border-[var(--color-zinc-950)]/10 px-4 py-2 font-medium first:pl-[var(--gutter,0.5rem)] last:pr-[var(--gutter,0.5rem)]
           {{if eq $align "center"}}text-center{{end}}
           {{if eq $align "right"}}text-right{{end}}
           {{.width}} {{.class}}">
  {{.text}}
</th>
{{end}}

{{/*
  Table Header Cell (slot content)

  For complex header content (icons, sorting controls, etc.)

  Usage:
    {{template "table-header-start"}}
      Name
      {{template "icon" dict "name" "chevron-down" "size" "xs"}}
    {{template "table-header-end"}}
*/}}
{{define "table-header-start"}}
{{- $align := or .align "left" -}}
<th class="border-b border-[var(--color-zinc-950)]/10 px-4 py-2 font-medium first:pl-[var(--gutter,0.5rem)] last:pr-[var(--gutter,0.5rem)]
           {{if eq $align "center"}}text-center{{end}}
           {{if eq $align "right"}}text-right{{end}}
           {{.width}} {{.class}}">
{{end}}

{{define "table-header-end"}}
</th>
{{end}}

{{/*
  Table Cell

  Data cell (td) with proper styling.

  Params:
    text   - Cell text content
    align  - Text alignment: left (default), center, right
    class  - Additional CSS classes

  Note: Parent table's dense/grid/striped settings affect styling via CSS.
*/}}
{{define "table-cell"}}
{{- $align := or .align "left" -}}
<td class="relative px-4 py-4 first:pl-[var(--gutter,0.5rem)] last:pr-[var(--gutter,0.5rem)]
           border-b border-[var(--color-zinc-950)]/5
           {{if eq $align "center"}}text-center{{end}}
           {{if eq $align "right"}}text-right{{end}}
           {{.class}}">
  {{.text}}
</td>
{{end}}

{{/*
  Table Cell (slot content)

  For complex cell content (badges, buttons, avatars, etc.)

  Usage:
    {{template "table-cell-start"}}
      {{template "badge" dict "text" "Active" "color" "success"}}
    {{template "table-cell-end"}}
*/}}
{{define "table-cell-start"}}
{{- $align := or .align "left" -}}
<td class="relative px-4 py-4 first:pl-[var(--gutter,0.5rem)] last:pr-[var(--gutter,0.5rem)]
           border-b border-[var(--color-zinc-950)]/5
           {{if eq $align "center"}}text-center{{end}}
           {{if eq $align "right"}}text-right{{end}}
           {{.class}}">
{{end}}

{{define "table-cell-end"}}
</td>
{{end}}

{{/*
  Table Cell Dense

  Compact cell for dense tables.
*/}}
{{define "table-cell-dense"}}
{{- $align := or .align "left" -}}
<td class="relative px-4 py-2.5 first:pl-[var(--gutter,0.5rem)] last:pr-[var(--gutter,0.5rem)]
           border-b border-[var(--color-zinc-950)]/5
           {{if eq $align "center"}}text-center{{end}}
           {{if eq $align "right"}}text-right{{end}}
           {{.class}}">
  {{.text}}
</td>
{{end}}

{{/*
  Empty State

  Display when table has no data.

  Usage:
    {{if not .Users}}
      {{template "table-empty" dict "text" "No users found" "icon" "users"}}
    {{end}}
*/}}
{{define "table-empty"}}
<tr>
  <td colspan="100" class="px-4 py-12 text-center">
    {{if .icon}}
    <div class="mx-auto mb-4 flex size-12 items-center justify-center rounded-full bg-[var(--color-zinc-100)] text-[var(--color-text-tertiary)]">
      {{template "icon" dict "name" .icon "size" "md"}}
    </div>
    {{end}}
    <p class="text-sm text-[var(--color-text-secondary)]">{{.text}}</p>
    {{if .action}}
    <div class="mt-4">
      {{template "button" .action}}
    </div>
    {{end}}
  </td>
</tr>
{{end}}
