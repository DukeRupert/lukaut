{{/*
  Navbar Component

  Horizontal top navigation bar.

  Components:
    - navbar-start/end: Container nav element
    - navbar-section-start/end: Group of related items
    - navbar-item: Navigation item (link or button)
    - navbar-divider: Vertical separator
    - navbar-spacer: Flexible spacer

  Usage:
    {{template "navbar-start"}}
      {{template "navbar-section-start"}}
        {{template "navbar-item" dict "href" "/dashboard" "text" "Dashboard" "current" true}}
        {{template "navbar-item" dict "href" "/inspections" "text" "Inspections"}}
        {{template "navbar-item" dict "href" "/reports" "text" "Reports"}}
      {{template "navbar-section-end"}}

      {{template "navbar-spacer"}}

      {{template "navbar-section-start"}}
        {{template "navbar-item" dict "href" "/settings" "icon" "cog-6-tooth"}}
        {{template "navbar-divider"}}
        {{template "navbar-item" dict "href" "/account" "icon" "user-circle"}}
      {{template "navbar-section-end"}}
    {{template "navbar-end"}}
*/}}

{{define "navbar-start"}}
<nav class="flex flex-1 items-center gap-4 py-2.5 {{.class}}">
{{end}}

{{define "navbar-end"}}
</nav>
{{end}}

{{/*
  Navbar Section

  Container for a group of related items.
*/}}
{{define "navbar-section-start"}}
<div class="flex items-center gap-3 {{.class}}">
{{end}}

{{define "navbar-section-end"}}
</div>
{{end}}

{{/*
  Navbar Item

  Navigation link or button.

  Params:
    href    - URL (makes it a link)
    text    - Item label (optional if icon-only)
    icon    - Icon name (optional)
    current - Boolean, marks as current page
    onclick - Click handler (for button items)
    class   - Additional CSS classes

  Usage:
    {{template "navbar-item" dict "href" "/dashboard" "text" "Dashboard" "current" true}}
    {{template "navbar-item" dict "href" "/settings" "icon" "cog-6-tooth"}}
*/}}
{{define "navbar-item"}}
{{- $current := or .current false -}}
{{- $tag := "button" -}}
{{- if .href }}{{- $tag = "a" -}}{{end}}

<span class="relative {{.class}}">
  {{if $current}}
  <span class="absolute inset-x-2 -bottom-2.5 h-0.5 rounded-full bg-[var(--color-text)]"></span>
  {{end}}

  <{{$tag}} {{if .href}}href="{{.href}}"{{else}}type="button"{{end}}
       {{if and (not .href) .onclick}}onclick="{{.onclick}}"{{end}}
       {{if $current}}data-current="true"{{end}}
       class="relative flex min-w-0 items-center gap-3 rounded-lg p-2 text-left text-base/6 font-medium text-[var(--color-text)] sm:text-sm/5
              hover:bg-[var(--color-zinc-950)]/5
              focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--color-primary)]">
    {{if .icon}}
    <span class="size-6 sm:size-5 shrink-0 text-[var(--color-text-tertiary)]">
      {{template "icon" dict "name" .icon "size" "md"}}
    </span>
    {{end}}
    {{if .text}}
    <span class="truncate">{{.text}}</span>
    {{end}}
  </{{$tag}}>
</span>
{{end}}

{{/*
  Navbar Divider

  Vertical line separator.
*/}}
{{define "navbar-divider"}}
<div aria-hidden="true" class="h-6 w-px bg-[var(--color-zinc-950)]/10 {{.class}}"></div>
{{end}}

{{/*
  Navbar Spacer

  Flexible space to push items apart.
*/}}
{{define "navbar-spacer"}}
<div aria-hidden="true" class="-ml-4 flex-1 {{.class}}"></div>
{{end}}

{{/*
  Navbar Label

  Text label inside an item.
*/}}
{{define "navbar-label"}}
<span class="truncate {{.class}}">{{.text}}</span>
{{end}}

{{/*
  Navbar Brand

  Logo/brand section typically at the start.

  Params:
    href  - Link URL (usually home)
    logo  - Logo image URL
    text  - Brand text
    class - Additional CSS classes

  Usage:
    {{template "navbar-brand" dict "href" "/" "logo" "/logo.svg" "text" "Lukaut"}}
*/}}
{{define "navbar-brand"}}
<a href="{{or .href "/"}}" class="flex items-center gap-2 rounded-lg p-2 hover:bg-[var(--color-zinc-950)]/5 {{.class}}">
  {{if .logo}}
  <img src="{{.logo}}" alt="" class="h-6 w-auto">
  {{end}}
  {{if .text}}
  <span class="font-semibold text-[var(--color-text)]">{{.text}}</span>
  {{end}}
</a>
{{end}}

{{/*
  Navbar User Menu

  User avatar with dropdown trigger.

  Params:
    name   - User name
    avatar - Avatar image URL (optional)
    email  - User email (optional)
    class  - Additional CSS classes

  Usage (with dropdown):
    {{template "dropdown-start" dict "position" "bottom-end"}}
      {{template "navbar-user-trigger" dict "name" "John Doe" "avatar" "/avatars/john.jpg"}}
      {{template "dropdown-menu-start" dict "position" "bottom-end"}}
        {{template "dropdown-header-start"}}
          <div class="font-medium">John Doe</div>
          <div class="text-xs text-zinc-500">john@example.com</div>
        {{template "dropdown-header-end"}}
        {{template "dropdown-divider"}}
        {{template "dropdown-item" dict "text" "Settings" "href" "/settings" "icon" "cog-6-tooth"}}
        {{template "dropdown-item" dict "text" "Sign out" "href" "/logout" "icon" "arrow-right-on-rectangle"}}
      {{template "dropdown-menu-end"}}
    {{template "dropdown-end"}}
*/}}
{{define "navbar-user-trigger"}}
{{template "dropdown-button-plain"}}
  {{if .avatar}}
  <img src="{{.avatar}}" alt="{{.name}}" class="size-8 rounded-full object-cover">
  {{else}}
  <span class="inline-flex size-8 items-center justify-center rounded-full bg-[var(--color-primary)] text-sm font-medium text-white">
    {{slice .name 0 1}}
  </span>
  {{end}}
{{template "dropdown-button-end"}}
{{end}}

{{/*
  Navbar Mobile Menu Button

  Hamburger button for mobile navigation.

  Usage:
    {{template "navbar-mobile-button" dict "onclick" "showMobileMenu = true"}}
*/}}
{{define "navbar-mobile-button"}}
<button type="button"
        onclick="{{.onclick}}"
        class="rounded-lg p-2 text-[var(--color-text-secondary)] hover:bg-[var(--color-zinc-950)]/5 hover:text-[var(--color-text)] lg:hidden {{.class}}"
        aria-label="Open navigation">
  <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
  </svg>
</button>
{{end}}
