{{define "violation_form.html"}}
<div class="bg-white shadow sm:rounded-lg">
    <div class="px-4 py-5 sm:p-6">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-base font-semibold leading-6 text-gray-900">Add Manual Violation</h3>
            <button
                type="button"
                @click="$dispatch('close-violation-form')"
                class="text-gray-400 hover:text-gray-500">
                <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                </svg>
            </button>
        </div>

        <form hx-post="/inspections/{{.ID}}/violations"
              hx-target="#violation-list"
              hx-swap="beforeend"
              @htmx:after-request="$dispatch('close-violation-form')"
              class="space-y-4">

            <!-- Description -->
            <div>
                <label for="new-violation-description" class="block text-sm font-medium text-gray-700">
                    Description <span class="text-red-500">*</span>
                </label>
                <textarea
                    id="new-violation-description"
                    name="description"
                    rows="3"
                    required
                    placeholder="Describe the safety violation..."
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-forest focus:ring-forest sm:text-sm"></textarea>
                <p class="mt-1 text-xs text-gray-500">Maximum 1000 characters</p>
            </div>

            <!-- Severity -->
            <div>
                <label for="new-violation-severity" class="block text-sm font-medium text-gray-700">
                    Severity <span class="text-red-500">*</span>
                </label>
                <select
                    id="new-violation-severity"
                    name="severity"
                    required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-forest focus:ring-forest sm:text-sm">
                    <option value="">Select severity...</option>
                    <option value="critical">Critical - Imminent danger</option>
                    <option value="serious">Serious - Potential for severe injury or death</option>
                    <option value="other">Other - Does not fit serious or willful categories</option>
                    <option value="recommendation">Recommendation - Best practice, not a violation</option>
                </select>
            </div>

            <!-- Inspector Notes -->
            <div>
                <label for="new-violation-notes" class="block text-sm font-medium text-gray-700">
                    Inspector Notes
                </label>
                <textarea
                    id="new-violation-notes"
                    name="inspector_notes"
                    rows="2"
                    placeholder="Additional notes or context..."
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-forest focus:ring-forest sm:text-sm"></textarea>
            </div>

            <!-- Actions -->
            <div class="flex gap-3">
                <button
                    type="submit"
                    class="inline-flex items-center rounded-md bg-forest px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-forest/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-forest">
                    <svg class="-ml-0.5 mr-1.5 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
                    </svg>
                    Add Violation
                </button>
                <button
                    type="button"
                    @click="$dispatch('close-violation-form')"
                    class="inline-flex items-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>
{{end}}
