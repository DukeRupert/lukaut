{{define "title"}}{{.Inspection.Title}}{{end}}

{{define "breadcrumb"}}
<nav class="flex" aria-label="Breadcrumb">
    <ol class="flex items-center space-x-4">
        <li>
            <div>
                <a href="/inspections" class="text-gray-400 hover:text-gray-500">
                    Inspections
                </a>
            </div>
        </li>
        <li>
            <div class="flex items-center">
                <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                </svg>
                <span class="ml-4 text-sm font-medium text-gray-500">{{.Inspection.Title}}</span>
            </div>
        </li>
    </ol>
</nav>
{{end}}

{{define "content"}}
<!-- Header with actions -->
<div class="md:flex md:items-center md:justify-between mb-6">
    <div class="min-w-0 flex-1">
        <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
            {{.Inspection.Title}}
        </h2>
        <div class="mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6">
            <div class="mt-2 flex items-center text-sm text-gray-500">
                <svg class="mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z" clip-rule="evenodd" />
                </svg>
                {{formatDate .Inspection.InspectionDate}}
            </div>
            {{if .Inspection.SiteName}}
            <div class="mt-2 flex items-center text-sm text-gray-500">
                <svg class="mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.273 1.765 11.842 11.842 0 00.976.544l.062.029.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" clip-rule="evenodd" />
                </svg>
                {{.Inspection.SiteName}}
            </div>
            {{end}}
            <div class="mt-2 flex items-center text-sm">
                <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium {{statusColor .Inspection.Status}}">
                    {{title .Inspection.Status}}
                </span>
            </div>
        </div>
    </div>
    <div class="mt-4 flex md:ml-4 md:mt-0 gap-x-3">
        <a href="/inspections/{{.Inspection.ID}}/edit"
           class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
            <svg class="-ml-0.5 mr-1.5 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path d="M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z" />
            </svg>
            Edit
        </a>
        <a href="/inspections"
           class="inline-flex items-center rounded-md bg-navy px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-navy/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-navy">
            Back to List
        </a>
    </div>
</div>

<!-- Details Card -->
<div class="bg-white shadow sm:rounded-lg mb-6">
    <div class="px-4 py-5 sm:p-6">
        <h3 class="text-base font-semibold leading-6 text-gray-900 mb-4">Inspection Details</h3>
        <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
            {{if .Inspection.SiteName}}
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Site</dt>
                <dd class="mt-1 text-sm text-gray-900">{{.Inspection.SiteName}}</dd>
                {{if .Inspection.SiteAddress}}
                <dd class="mt-1 text-sm text-gray-500">
                    {{.Inspection.SiteAddress}}<br>
                    {{.Inspection.SiteCity}}, {{.Inspection.SiteState}}
                </dd>
                {{end}}
            </div>
            {{end}}

            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Inspection Date</dt>
                <dd class="mt-1 text-sm text-gray-900">{{formatDate .Inspection.InspectionDate}}</dd>
            </div>

            {{if .Inspection.WeatherConditions}}
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Weather Conditions</dt>
                <dd class="mt-1 text-sm text-gray-900">{{.Inspection.WeatherConditions}}</dd>
            </div>
            {{end}}

            {{if .Inspection.Temperature}}
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Temperature</dt>
                <dd class="mt-1 text-sm text-gray-900">{{.Inspection.Temperature}}</dd>
            </div>
            {{end}}

            {{if .Inspection.InspectorNotes}}
            <div class="sm:col-span-2">
                <dt class="text-sm font-medium text-gray-500">Inspector Notes</dt>
                <dd class="mt-1 text-sm text-gray-900 whitespace-pre-wrap">{{.Inspection.InspectorNotes}}</dd>
            </div>
            {{end}}

            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Created</dt>
                <dd class="mt-1 text-sm text-gray-900">{{formatDate .Inspection.CreatedAt}}</dd>
            </div>

            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Last Updated</dt>
                <dd class="mt-1 text-sm text-gray-900">{{formatDate .Inspection.UpdatedAt}}</dd>
            </div>
        </dl>
    </div>
</div>

<!-- Photos Section -->
<div class="space-y-6 mb-6">
    <!-- Upload Form -->
    {{if .CanUpload}}
    {{template "image_upload.html" .}}
    {{end}}

    <!-- Image Gallery -->
    <div class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-base font-semibold leading-6 text-gray-900 mb-4">Uploaded Photos</h3>
            {{template "image_gallery.html" .GalleryData}}
        </div>
    </div>

    <!-- Analysis Status -->
    {{template "analysis_status.html" .AnalysisStatus}}
</div>

<!-- Violations Section (Placeholder) -->
<div class="bg-white shadow sm:rounded-lg">
    <div class="px-4 py-5 sm:p-6">
        <div class="sm:flex sm:items-center">
            <div class="sm:flex-auto">
                <h3 class="text-base font-semibold leading-6 text-gray-900">Violations</h3>
                <p class="mt-2 text-sm text-gray-700">AI-identified potential OSHA violations.</p>
            </div>
        </div>
        <div class="mt-6 text-center py-12 border-2 border-dashed border-gray-300 rounded-lg">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
            <p class="mt-2 text-sm text-gray-500">No violations identified yet</p>
            <p class="text-xs text-gray-400 mt-1">Upload photos to begin AI analysis</p>
        </div>
    </div>
</div>
{{end}}
